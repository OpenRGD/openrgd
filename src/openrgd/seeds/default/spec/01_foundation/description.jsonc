/**
 * ------------------------------------------------------------------
 * OPEN R.G.D. STANDARD v0.2 — REFERENCE IMPLEMENTATION
 * ------------------------------------------------------------------
 * FILE: description.jsonc
 * CONTEXT: 01_FOUNDATION (THE BODY — PLATONIC MODEL)
 *
 * PURPOSE:
 *   This file defines the "Ideal Robot" — the CAD-perfect version
 *   of the embodiment before real-world calibration, wear or sensor drift.
 *
 * HUMAN INTERPRETATION:
 *   Think of this file as the *blueprint of the species*, not a single unit.
 *   All physical truth begins here. Calibration adjusts FROM this baseline.
 *
 * LLM INTERPRETATION:
 *   Use this file as the canonical source for:
 *     - link masses, inertias, geometry
 *     - joint topology, axes, ideal limits
 *     - sensor placements (before calibration deltas)
 *     - actuator placement (not actuator physics)
 *
 * IMPORTANT:
 *   - NO friction, offsets, backlash or thermal effects belong here.
 *     Those are in calibration.jsonc and actuation_dynamics.jsonc.
 *   - NO runtime or ROS2 information belongs here.
 *     That is in hal_mapping.jsonc.
 */

{
  // ==============================================================
  // 1. CORE METADATA
  // ==============================================================

  "meta_group": {
    "model_id_str": "bhl_humanoid_lite_v2",
    "species_name_str": "BHL_Lite",
    "manufacturer_str": "Berkeley_Open_Robotics",
    "license_enum": "MIT_OPEN_HARDWARE",

    "version_semver_str": "0.2.0",
    "release_date_iso8601_str": "2025-11-23",

    // Quick physical summary
    "total_mass_ideal_kg_float": 12.5,
    "dof_active_count_int": 20,
    "ideal_power_budget_w_float": 350.0,

    "related_files_map": {
      "calibration_ref_str": "01_foundation/calibration.jsonc",
      "actuation_topology_ref_str": "01_foundation/actuation_topology.jsonc",
      "actuation_dynamics_ref_str": "01_foundation/actuation_dynamics.jsonc",
      "hal_mapping_ref_str": "01_foundation/hal_mapping.jsonc",
      "firmware_manifest_ref_str": "01_foundation/firmware_manifest.jsonc"
    }
  },

  // ==============================================================
  // 2. WORLD / SIM INTERFACE (Ideal Spatial Definition)
  // ==============================================================

  "embodiment_config": {
    "up_axis_enum": "Z_UP",
    "forward_axis_enum": "X_FORWARD",
    "unit_system_enum": "SI_METRIC",

    // The root link in simulation and kinematics
    "root_link_ref_str": "torso_base_link",

    "assets_manifest": {
      "visual_usd_uri_str": "assets/visual/bhl_v2.usd",
      "collision_usd_uri_str": "assets/collision/bhl_v2_collision.usd",
      "mesh_scale_vec3_float": [1.0, 1.0, 1.0]
    }
  },

  // ==============================================================
  // 3. KINEMATIC CHAIN — IDEAL RIGID BODIES
  // ==============================================================

  "kinematic_chain_list": [

    // ------------------------------------------------------------
    // TORSO
    // ------------------------------------------------------------
    {
      "link_id_str": "torso_base_link",
      "semantic_tag_enum": "TORSO",

      "inertial_properties": {
        "mass_kg_float": 4.2,
        "center_of_mass_xyz_m_vec3_float": [0.0, 0.0, 0.15],
        "inertia_tensor_xx_yy_zz_xy_xz_yz_kgm2_vec6_float": [0.05, 0.05, 0.02, 0.0, 0.0, 0.0]
      },

      "collision_geometry": {
        "primitive_type_enum": "BOX",
        "dimensions_xyz_m_vec3_float": [0.25, 0.15, 0.40]
      }
    },

    // ------------------------------------------------------------
    // RIGHT THIGH
    // ------------------------------------------------------------
    {
      "link_id_str": "thigh_right_link",
      "semantic_tag_enum": "UPPER_LEG_RIGHT",

      "inertial_properties": {
        "mass_kg_float": 1.8,
        "center_of_mass_xyz_m_vec3_float": [0.0, 0.0, -0.15],
        "inertia_tensor_xx_yy_zz_xy_xz_yz_kgm2_vec6_float": [0.01, 0.01, 0.002, 0.0, 0.0, 0.0]
      }
    },

    // ------------------------------------------------------------
    // RIGHT SHIN
    // ------------------------------------------------------------
    {
      "link_id_str": "shin_right_link",
      "semantic_tag_enum": "LOWER_LEG_RIGHT",

      "inertial_properties": {
        "mass_kg_float": 1.0,
        "center_of_mass_xyz_m_vec3_float": [0.0, 0.0, -0.18],
        "inertia_tensor_xx_yy_zz_xy_xz_yz_kgm2_vec6_float": [0.008, 0.008, 0.0015, 0.0, 0.0, 0.0]
      }
    },

    // ------------------------------------------------------------
    // RIGHT FOOT
    // ------------------------------------------------------------
    {
      "link_id_str": "foot_right_link",
      "semantic_tag_enum": "FOOT_RIGHT",

      "inertial_properties": {
        "mass_kg_float": 0.4,
        "center_of_mass_xyz_m_vec3_float": [0.02, 0.0, -0.02]
      },

      "contact_points_list": [
        { "label_str": "toe",  "local_pos_vec3_float": [0.1,  0.0, -0.02] },
        { "label_str": "heel", "local_pos_vec3_float": [-0.05, 0.0, -0.02] }
      ]
    }
  ],

  // ==============================================================
  // 4. IDEAL JOINT TOPOLOGY (NO CALIBRATION, NO FRICTION)
  // ==============================================================

  "joint_topology_map": {
    "knee_joint_right": {
      "type_enum": "REVOLUTE",
      "semantic_label_str": "right_knee_flexion",

      "connectivity": {
        "parent_link_ref_str": "thigh_right_link",
        "child_link_ref_str": "shin_right_link"
      },

      "geometry_ideal": {
        "origin_xyz_m_vec3_float": [0.0, 0.0, -0.35],
        "origin_rpy_rad_vec3_float": [0.0, 0.0, 0.0],
        "axis_xyz_vec3_float": [0.0, 1.0, 0.0]
      },

      // These are IDEAL HARD limits, before safety envelopes
      "limits_ideal": {
        "position_lower_rad_float": -2.618,
        "position_upper_rad_float": 0.0,
        "velocity_max_rad_s_float": 12.0,
        "effort_max_nm_float": 45.0
      },

      // Ideal damping only — no friction, no backlash
      "dynamics_ideal": {
        "damping_nms_rad_float": 0.1
      }
    }
  },

  // ==============================================================
  // 5. SENSOR MOUNTING — IDEAL EXTRINSICS
  // ==============================================================

  "sensors_mounting_map": {
    "torso_imu": {
      "device_type_enum": "IMU_6DOF",
      "parent_frame_ref_str": "torso_base_link",
      "mount_pose_xyz_m_vec3_float": [0.0, 0.0, 0.0],
      "mount_pose_rpy_rad_vec3_float": [0.0, 0.0, 0.0],
      "update_rate_hz_float": 1000.0
    },

    "head_camera_main": {
      "device_type_enum": "RGBD_CAMERA",
      "parent_frame_ref_str": "head_link",
      "mount_pose_xyz_m_vec3_float": [0.08, 0.0, 0.05],
      "mount_pose_rpy_rad_vec3_float": [0.0, 0.0, 0.0],
      "resolution_wh_vec2_int": [1920, 1080],
      "fov_horizontal_rad_float": 1.5707  // 90° in radians
    },

    "head_mic_array": {
      "device_type_enum": "MICROPHONE_ARRAY",
      "channels_count_int": 4,
      "parent_frame_ref_str": "head_link",
      "mount_pose_xyz_m_vec3_float": [0.0, 0.0, 0.0],
      "mount_pose_rpy_rad_vec3_float": [0.0, 0.0, 0.0]
    },

    "chest_lidar": {
      "device_type_enum": "LIDAR_SOLID_STATE",
      "parent_frame_ref_str": "torso_base_link",
      "mount_pose_xyz_m_vec3_float": [0.1, 0.0, -0.1],
      "mount_pose_rpy_rad_vec3_float": [0.0, 0.0, 0.0],
      "range_max_m_float": 12.0
    },

    "wifi_rf_module": {
      "device_type_enum": "RF_TRANSCEIVER",
      "parent_frame_ref_str": "torso_base_link",
      "capabilities_map": {
        "wifi_csi_sensing_bool": true,
        "ble_sniffing_bool": true
      }
    }
  },

  // ==============================================================
  // 6. ACTUATOR MOUNTING — PHYSICAL POSITION ONLY
  // ==============================================================

  "actuators_topology_map": {
    "knee_right_actuator": {
      "drives_joint_ref_str": "knee_joint_right",
      "component_model_ref_str": "tmotor_ak80_9_v2",

      // NO dynamics here. Only geometry and direction.
      "mount_pose_xyz_m_vec3_float": [0.0, -0.02, -0.25],
      "mount_pose_rpy_rad_vec3_float": [0.0, 0.0, 0.0],
      "mechanical_reduction_ratio_float": 10.0,
      "direction_polarity_int": -1
    }
  },

  // ==============================================================
  // 7. CAPABILITIES MANIFEST
  // ==============================================================

  "capabilities_manifest": {
    "teleoperation_supported_bool": true,
    "object_manipulation_bool": true,
    "terrain_navigation_bool": true,
    "human_safe_interaction_bool": false   // Ideal spec does not imply safety certification
  }
}
