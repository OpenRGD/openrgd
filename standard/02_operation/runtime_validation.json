{
  "meta_group": {
    "validation_profile_id_str": "bhl_runtime_validation_v1",
    "version_semver_str": "1.0.0",
    "last_updated_iso8601_str": "2025-11-23T18:20:00Z",
    "domain_id_str": "02_operation",
    "file_role_enum": "RUNTIME_VALIDATION_RULESET",
    "related_files_map": {
      "firmware_mapping_ref_str": "01_foundation/firmware_mapping.jsonc",
      "hal_mapping_ref_str": "01_foundation/hal_mapping.jsonc",
      "compute_topology_ref_str": "01_foundation/compute_topology.jsonc",
      "actuation_topology_ref_str": "01_foundation/actuation_topology.jsonc",
      "calibration_ref_str": "01_foundation/calibration.jsonc",
      "safety_critical_ref_str": "02_operation/safety_critical.jsonc"
    },
    "interpretation_guides": {
      "for_humans_str": "Use this file as the formal checklist for boot acceptance, runtime health monitoring and fault response.",
      "for_llms_str": "When reasoning about errors, map sensor/firmware/hal issues to these rules. Never propose motion that bypasses a severity=CRITICAL violation."
    }
  },
  "pre_flight_checks_list": [
    {
      "check_id_str": "firmware_consistency",
      "description_str": "All critical devices must run a compatible, signed firmware version.",
      "severity_enum": "CRITICAL",
      "sources_ref_map": {
        "firmware_mapping_str": "01_foundation/firmware_mapping.jsonc",
        "hal_mapping_str": "01_foundation/hal_mapping.jsonc"
      },
      "conditions": {
        "require_signed_firmware_bool": true,
        "enforce_semver_strict_bool": true,
        "allow_pre_release_on_non_critical_bool": true
      },
      "on_failure_policy": {
        "block_motion_bool": true,
        "require_manual_acknowledge_bool": true,
        "log_category_enum": "SECURITY",
        "human_message_str": "Critical firmware mismatch detected. Robot will remain immobilized until firmware is updated or mapping is fixed."
      }
    },
    {
      "check_id_str": "safety_core_presence",
      "description_str": "Verify that safety cores (MCU/FPGA) are present and report healthy status.",
      "severity_enum": "CRITICAL",
      "sources_ref_map": {
        "compute_topology_str": "01_foundation/compute_topology.jsonc",
        "firmware_mapping_str": "01_foundation/firmware_mapping.jsonc"
      },
      "conditions": {
        "require_dual_channel_cat3_bool": true,
        "max_selftest_duration_ms_int": 2000
      },
      "on_failure_policy": {
        "block_motion_bool": true,
        "require_manual_acknowledge_bool": true,
        "log_category_enum": "SAFETY",
        "human_message_str": "Safety core self-test failed or missing. Do not operate the robot."
      }
    },
    {
      "check_id_str": "actuator_enumeration",
      "description_str": "All actuators defined in actuation_topology must be visible on their buses.",
      "severity_enum": "MAJOR",
      "sources_ref_map": {
        "actuation_topology_str": "01_foundation/actuation_topology.jsonc",
        "hal_mapping_str": "01_foundation/hal_mapping.jsonc"
      },
      "conditions": {
        "allow_missing_non_critical_actuators_bool": true,
        "max_missing_devices_count_int": 1
      },
      "on_failure_policy": {
        "block_motion_bool": true,
        "require_manual_acknowledge_bool": false,
        "log_category_enum": "HARDWARE",
        "human_message_str": "One or more actuators not detected. Check cabling, power or IDs."
      }
    },
    {
      "check_id_str": "calibration_validity",
      "description_str": "Calibration file must match the description hash and not be older than the allowed age.",
      "severity_enum": "MAJOR",
      "sources_ref_map": {
        "calibration_str": "01_foundation/calibration.jsonc",
        "description_str": "01_foundation/description.jsonc"
      },
      "conditions": {
        "max_calibration_age_days_int": 30,
        "require_description_hash_match_bool": true
      },
      "on_failure_policy": {
        "block_motion_bool": false,
        "require_manual_acknowledge_bool": true,
        "log_category_enum": "MAINTENANCE",
        "human_message_str": "Calibration data is stale or mismatched. Consider re-running calibration before high-precision tasks."
      }
    }
  ],
  "continuous_monitors_list": [
    {
      "monitor_id_str": "bus_health_monitor",
      "description_str": "Monitor critical buses (CAN, CSI, inter-processor links) for errors and latency spikes.",
      "severity_enum": "MAJOR",
      "sources_ref_map": {
        "hal_mapping_str": "01_foundation/hal_mapping.jsonc",
        "compute_topology_str": "01_foundation/compute_topology.jsonc"
      },
      "sampling_period_ms_int": 100,
      "thresholds": {
        "max_can_error_rate_per_sec_float": 10.0,
        "max_lost_frames_per_sec_float": 5.0,
        "max_latency_spike_factor_float": 3.0
      },
      "on_violation_policy": {
        "degrade_mode_enum": "REDUCE_VELOCITY_AND_RANGE_OF_MOTION",
        "log_category_enum": "COMMUNICATION",
        "raise_operator_alert_bool": true
      }
    },
    {
      "monitor_id_str": "thermal_headroom_monitor",
      "description_str": "Check actuator and compute thermals against firmware safety invariants.",
      "severity_enum": "CRITICAL",
      "sources_ref_map": {
        "firmware_mapping_str": "01_foundation/firmware_mapping.jsonc",
        "actuation_topology_str": "01_foundation/actuation_topology.jsonc"
      },
      "sampling_period_ms_int": 200,
      "thresholds": {
        "warning_margin_c_float": 10.0,
        "critical_margin_c_float": 3.0
      },
      "on_violation_policy": {
        "warning_action_enum": "THROTTLE_TORQUE_AND_SPEED",
        "critical_action_enum": "CONTROLLED_STOP_AND_COOL_DOWN",
        "log_category_enum": "THERMAL"
      }
    },
    {
      "monitor_id_str": "timing_budget_monitor",
      "description_str": "Ensure AI/LLM planners respect timing budgets defined in compute_topology.",
      "severity_enum": "CRITICAL",
      "sources_ref_map": {
        "compute_topology_str": "01_foundation/compute_topology.jsonc"
      },
      "sampling_period_ms_int": 50,
      "thresholds": {
        "max_ai_processing_budget_us_int": 10000,
        "max_consecutive_budget_violations_int": 5
      },
      "on_violation_policy": {
        "action_enum": "FALLBACK_TO_REFLEX_CONTROLLER",
        "log_category_enum": "TIMING",
        "human_message_str": "High-level planner exceeding timing budget. Falling back to reflex-level control."
      }
    }
  ],
  "severity_policies_map": {
    "INFO": {
      "human_label_str": "Informational",
      "allow_motion_bool": true,
      "log_required_bool": true,
      "operator_ack_required_bool": false
    },
    "MINOR": {
      "human_label_str": "Minor Degradation",
      "allow_motion_bool": true,
      "log_required_bool": true,
      "operator_ack_required_bool": false
    },
    "MAJOR": {
      "human_label_str": "Major Degradation",
      "allow_motion_bool": false,
      "log_required_bool": true,
      "operator_ack_required_bool": true
    },
    "CRITICAL": {
      "human_label_str": "Critical Safety Violation",
      "allow_motion_bool": false,
      "log_required_bool": true,
      "operator_ack_required_bool": true,
      "force_safe_posture_bool": true
    }
  },
  "llm_guidance": {
    "when_generating_plans": {
      "must_check_pre_flight_bool": true,
      "respect_timing_budgets_bool": true,
      "avoid_using_components_with_status_enum_list": [
        "INCOMPATIBLE",
        "DEGRADED_CRITICAL"
      ],
      "fallback_hint_str": "If any CRITICAL rule is violated, propose only actions that maintain or reach a safe, static posture."
    },
    "when_explaining_faults_to_humans": {
      "include_sections_list_str": [
        "which_rule_failed",
        "severity_level",
        "recommended_action",
        "possible_causes"
      ]
    }
  }
}